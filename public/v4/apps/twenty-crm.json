{
  "captainVersion": "4",
  "documentation": "https://twenty.com/developers",
  "displayName": "Twenty CRM",
  "description": "Self-hosted open-source CRM platform",
  "instructions": "Deploys the Twenty CRM + NGINX frontend proxy. Add secrets later via CapRover App Config.",
  "services": [
    {
      "containerHttpPort": "80",
      "image": "nginx:alpine",
      "envVars": [],
      "notExposeAsWebApp": false,
      "volumeMounts": [
        {
          "containerPath": "/etc/nginx/nginx.conf",
          "hostPath": "/captain/data/twenty-nginx.conf"
        },
        {
          "containerPath": "/app/docker-data",
          "hostPath": "/captain/data/twenty-docker-data"
        }
      ]
    },
    {
      "image": "twentycrm/twenty:v0.50.9",
      "envVars": [
        { "key": "STORAGE_TYPE", "value": "local" },
        { "key": "STORAGE_LOCAL_PATH", "value": ".local-storage" },
        { "key": "SERVER_URL", "value": "https://crm-everymkt.go.goautomatique.com" },
        { "key": "SIGN_IN_PREFILLED", "value": "true" },
        { "key": "APP_SECRET", "value": "" },
        { "key": "PG_DATABASE_URL", "value": "postgres://every_twenty:<YOUR_PASSWORD>@srv-captain--twenty-db:5432/twenty" },
        { "key": "REDIS_URL", "value": "redis://:<YOUR_PASSWORD>@srv-captain--twenty-redis:6379/0" },
        { "key": "EMAIL_FROM_ADDRESS", "value": "" },
        { "key": "EMAIL_SMTP_HOST", "value": "smtp.gmail.com" },
        { "key": "EMAIL_SMTP_USER", "value": "" },
        { "key": "EMAIL_SMTP_HOST_PASSWORD", "value": "" },
        { "key": "EMAIL_SMTP_PORT", "value": "465" },
        { "key": "CALENDAR_PROVIDER_GOOGLE_ENABLED", "value": "true" }

        // Add these later manually via CapRover UI:
        // AUTH_GOOGLE_CLIENT_ID
        // AUTH_GOOGLE_CLIENT_SECRET
        // AUTH_GOOGLE_CALLBACK_URL
        // AUTH_GOOGLE_APIS_CALLBACK_URL
      ],
      "volumeMounts": [
        {
          "containerPath": "/app/.local-storage",
          "hostPath": "/captain/data/twenty-local-storage"
        },
        {
          "containerPath": "/app/docker-data",
          "hostPath": "/captain/data/twenty-docker-data"
        }
      ]
    }
  ]
}
